% Amazon -- cover requirements
\documentclass[markcolor=white, trimmed=false, coverwidth=138mm, coverheight=213mm, spinewidth=13.41mm, markthick=0.0pt, marklength=0.0pt]{bookcover}
% Lulu -- cover requirements
% \documentclass[markcolor=white, trimmed=false, coverwidth=151mm, coverheight=225mm, spinewidth=12.13mm, markthick=0.0pt, marklength=0.0pt]{bookcover}
\usepackage[default]{comfortaa}
\usepackage[british]{babel}
\usepackage{barracuda}
\usepackage{fontspec}
\usepackage{csquotes}
\usepackage{xparse}
% https://tex.stackexchange.com/a/28036
\def\barcode#1#2#3#4#5#6#7{\begingroup%
  \dimen0=0.1em
  \def\stack##1##2{\oalign{##1\cr\hidewidth##2\hidewidth}}%
  \def\0##1{\kern##1\dimen0}%
  \def\1##1{\vrule height10ex width##1\dimen0}%
  \def\L##1{\ifcase##1\bc3211##1\or\bc2221##1\or\bc2122##1\or\bc1411##1%
    \or\bc1132##1\or\bc1231##1\or\bc1114##1\or\bc1312##1\or\bc1213##1%
    \or\bc3112##1\fi}%
  \def\R##1{\bgroup\let\next\1\let\1\0\let\0\next\L##1\egroup}%
  \def\G##1{\bgroup\let\bc\bcg\L##1\egroup}% reverse
  \def\bc##1##2##3##4##5{\stack{\0##1\1##2\0##3\1##4}##5}%
  \def\bcg##1##2##3##4##5{\stack{\0##4\1##3\0##2\1##1}##5}%
  \def\bcR##1##2##3##4##5##6{\R##1\R##2\R##3\R##4\R##5\R##6\11\01\11\09%
    \endgroup}%
  \stack{\09}#1\11\01\11\L#2%
  \ifcase#1\L#3\L#4\L#5\L#6\L#7\or\L#3\G#4\L#5\G#6\G#7%
    \or\L#3\G#4\G#5\L#6\G#7\or\L#3\G#4\G#5\G#6\L#7%
    \or\G#3\L#4\L#5\G#6\G#7\or\G#3\G#4\L#5\L#6\G#7%
    \or\G#3\G#4\G#5\L#6\L#7\or\G#3\L#4\G#5\L#6\G#7%
    \or\G#3\L#4\G#5\G#6\L#7\or\G#3\G#4\L#5\G#6\L#7%
  \fi\01\11\01\11\01\bcR}
\usepackage[protrusion,final]{microtype}
\NewDocumentCommand{\UnicursalHexagram}{
  m % size
}{
  \begin{tikzpicture}
    \draw[white,line width=2.2mm] (0,1.2 * #1) -- (-1.15 * #1,-.65 * #1) -- (1.15 * #1,.65 * #1) -- (0,-1.2 * #1) -- (-1.15 * #1,.65 * #1) -- (1.15 * #1,-.65 * #1) -- cycle;
    \draw[\MainColour,line width=1.1mm] (0,1.2 * #1) -- (-1.15 * #1,-.65 * #1) -- (1.15 * #1,.65 * #1) -- (0,-1.2 * #1) -- (-1.15 * #1,.65 * #1) -- (1.15 * #1,-.65 * #1) -- cycle;
  \end{tikzpicture}
}
\NewDocumentCommand{\PlainUnicursalHexagram}{
  m % size
}{
  \begin{tikzpicture}
    \draw[white,line width=.2mm] (0,1.2 * #1) -- (-1.15 * #1,-.65 * #1) -- (1.15 * #1,.65 * #1) -- (0,-1.2 * #1) -- (-1.15 * #1,.65 * #1) -- (1.15 * #1,-.65 * #1) -- cycle;
  \end{tikzpicture}
}

\newcommand{\MainColour}{red!12!black!95}
\newcommand{\BGColour}{black!100}
\newcommand{\BorderSize}{40mm}
\begin{document}
\begin{bookcover}
\bookcovercomponent{color}{bg whole}{\BGColour}
\bookcovercomponent{color}{front}{\MainColour}
\bookcovercomponent{color}{back}{\MainColour}
\bookcovercomponent{color}{bg spine}{\BGColour}
\bookcovercomponent{normal}{front}{
  \begin{center}
  \vspace*{\fill}
  \fontsize{36pt}{0em}\selectfont\textcolor{white}{Invoke Often!}

  \vspace{1.0cm}

  \UnicursalHexagram{2.50}

  \vspace{1.0cm}

  \fontsize{18pt}{0em}\textit{\textcolor{white}{Class D Libri -- Instructions \& Rituals}}

  \vspace*{\fill}
  \end{center}
}
% Spine Border front
\bookcovercomponent{tikz}{front}{
  \fill[white] (part.south west) -- (part.north west) -- ([xshift=4.2mm] part.north west) -- ([xshift=4.2mm] part.south west) -- cycle;
}
% Top front Border
\bookcovercomponent{tikz}{front}{
  \fill[white] (part.north east) -- (part.north west) -- ([yshift=-5.2mm] part.north west) -- ([yshift=-5.2mm] part.north east) -- cycle;
}
% Bottom front Border
\bookcovercomponent{tikz}{front}{
  \fill[white] (part.south east) -- (part.south west) -- ([yshift=5.2mm] part.south west) -- ([yshift=5.2mm] part.south east) -- cycle;
}
% Edge Border front
\bookcovercomponent{tikz}{front}{
  \fill[white] (part.south east) -- (part.north east) -- ([xshift=-4.2mm] part.north east) -- ([xshift=-4.2mm] part.south east) -- cycle;
}
% Spine border back
\bookcovercomponent{tikz}{back}{
  \fill[white] (part.south east) -- (part.north east) -- ([xshift=-4.2mm] part.north east) -- ([xshift=-4.2mm] part.south east) -- cycle;
}
% Top Border back
\bookcovercomponent{tikz}{back}{
  \fill[white] (part.north east) -- (part.north west) -- ([yshift=-5.2mm] part.north west) -- ([yshift=-5.2mm] part.north east) -- cycle;
}
% Bottom Border back
\bookcovercomponent{tikz}{back}{
  \fill[white] (part.south east) -- (part.south west) -- ([yshift=5.2mm] part.south west) -- ([yshift=5.2mm] part.south east) -- cycle;
}
% Edge Border back
\bookcovercomponent{tikz}{back}{
  \fill[white] (part.south west) -- (part.north west) -- ([xshift=4.2mm] part.north west) -- ([xshift=4.2mm] part.south west) -- cycle;
}





% Spine Border front
\bookcovercomponent{tikz}{front}{
  \fill[black] ([xshift=-.1cm] part.south west) -- ([xshift=-.1cm] part.north west) -- ([xshift=0.4cm] part.north west) -- ([xshift=0.4cm] part.south west) -- cycle;
}
% Top front Border
\bookcovercomponent{tikz}{front}{
  \fill[black] ([yshift=0.1cm] part.north east) -- ([yshift=0.1cm] part.north west) -- ([yshift=-0.5cm] part.north west) -- ([yshift=-0.5cm] part.north east) -- cycle;
}
% Bottom front Border
\bookcovercomponent{tikz}{front}{
  \fill[black] ([yshift=-0.1cm] part.south east) -- ([yshift=-0.1cm] part.south west) -- ([yshift=0.5cm] part.south west) -- ([yshift=0.5cm] part.south east) -- cycle;
}
% Edge Border front
\bookcovercomponent{tikz}{front}{
  \fill[black] ([xshift=.1cm] part.south east) -- ([xshift=.1cm] part.north east) -- ([xshift=-0.4cm] part.north east) -- ([xshift=-0.4cm] part.south east) -- cycle;
}
% Spine border back
\bookcovercomponent{tikz}{back}{
  \fill[black] ([xshift=.1cm] part.south east) -- ([xshift=.1cm] part.north east) -- ([xshift=-0.4cm] part.north east) -- ([xshift=-0.4cm] part.south east) -- cycle;
}
% Top Border back
\bookcovercomponent{tikz}{back}{
  \fill[black] ([yshift=0.1cm] part.north east) -- ([yshift=0.1cm] part.north west) -- ([yshift=-0.5cm] part.north west) -- ([yshift=-0.5cm] part.north east) -- cycle;
}
% Bottom Border back
\bookcovercomponent{tikz}{back}{
  \fill[black] ([yshift=-0.1cm] part.south east) -- ([yshift=-0.1cm] part.south west) -- ([yshift=0.5cm] part.south west) -- ([yshift=0.5cm] part.south east) -- cycle;
}
% Edge Border back
\bookcovercomponent{tikz}{back}{
  \fill[black] ([xshift=-.1cm] part.south west) -- ([xshift=-.1cm] part.north west) -- ([xshift=0.4cm] part.north west) -- ([xshift=0.4cm] part.south west) -- cycle;
}
\bookcovercomponent{center}{spine}{
  \vspace*{\fill}
  \rotatebox[origin=c]{-90}{
    \color{white}\Large
    \fontsize{16pt}{0em}{\selectfont\hspace*{\fill}\textcolor{white}{Invoke Often!}\hspace*{\fill}}

    \hspace{12em}

    \fontsize{16pt}{0em}{\selectfont\hspace*{\fill}\textcolor{white}{Aleister Crowley}\hspace*{\fill}}
  \vspace*{\fill}
  }
}
\bookcovercomponent{normal}{back}{
  \begin{center}
  \vspace*{\fill}
  \vspace{3.3cm}
  \textcolor{white}{\fontsize{36pt}{0em}\textsc{Αυμγν.}}

  \vspace{24pt}

  \textcolor{white}{\fontsize{36pt}{0em}\textsc{Abrahadabra.}}
  \end{center}
  \vspace*{\fill}
   \hspace{0.5in}
   \setlength{\fboxsep}{1mm}
   \hspace*{\fill}
   \colorbox{white}{
     \includegraphics{isbn}
   }
   \vspace*{9mm}
   \hspace{7mm}
}
\end{bookcover}
\end{document}
